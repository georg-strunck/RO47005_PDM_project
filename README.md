# Drone Delivery Path Planning Algorithm and Simulation

This repository was created for the RO47006 Planning & Decision Making course 2022/23 at the TU Delft by D. Janssen, T. Lukassen, G. Strunck and C. Wiers. It shows an approach of using an RRT* path planning algorithm to decide on a path for a package delivery drone in a city. For simulation CoppeliaSim has been used to create the city environment, providing a map for the planner to generate a path. The quadcopter is follow the generated path with a PD controller.

## Table of Contents

- [Requirements](#requirements)
- [Setup](#setup)
- [How to Use](#howto)

## Requirements

The code was developed in ```python 3.6```.
To run the planner the following packages need to be installed and sourced in your environment:

- ```numpy```
- ```math```
- ```pyzmq```
- ```cbor```
- ```gym```
- ```matplotlib```
- ```csv```

To install missing packages use ```pip install:```
```
$ /path/to/python_env -m pip install pyzmq
$ /path/to/python_env -m pip install cbor
```
> Note: Replace the `</path/to/python_env>` with your path to the python environment or have it activated

To connect remotely to the Coppelia simulation use of the [ZeroMQ remote API](https://github.com/CoppeliaRobotics/zmqRemoteApi) was made. For that the [zmqRemoteApi folder](/zmqRemoteApi/) has been included in this repository. Alternatively it can be downloaded from [this repository](https://github.com/CoppeliaRobotics/zmqRemoteApi/tree/master/clients/python).

For the simulation ```Coppelia 4.4.0 2022``` has been used. To install it please follow the instructions on their [CoppeliaSim downloads website](https://www.coppeliarobotics.com/downloads).


## How to Use

The planner and the simulation have been kept separate for modularity and time savings. 

To initialize the simulation in Coppelia first open the [```quadcopter_city_environment.ttt```](/quadcopter_city_environment.ttt). Once the window opens and shows the city scene including the drone the simulation can be started by running the [```my_main.py```](/my_main.py) script. 

<center>
<img src="Images/city_environment.JPG" width="400" />
</center>

This will first export the [obstacle bounding box map](/bboxes_objects.csv) and the [obstacle center location map](/center_positions_objects.csv). Then it will read the path generated by the RRT* planner from [```final_path.csv```](/final_path.csv) and fly the route in the CoppeliaSim city environment.


<center>
<img src="Images/quad_image.JPG" width="400" />
</center>
> Note that the quadcopter is very small compared to the buildings.
